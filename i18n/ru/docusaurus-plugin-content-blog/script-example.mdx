---
slug: animation-script
title: Пример сюжетного скрипта с анимацией НПС
authors: [hollow, algorithmlx]
tags: [scripts]
---

```mdx-code-block
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
```

Script of going npc and starting animation
```mdx-code-block
<Tabs>
<TabItem value="legacy" label="Legacy">
```

```jsx
import net.minecraft.core.BlockPos
import ru.hollowhorizon.hc.client.gltf.animations.PlayType
import ru.hollowhorizon.hollowengine.common.npcs.IHollowNPC

team.sendMessage("Hello World! ${this.world.level}")

//Создаём нового NPC
val npc: IHollowNPC = makeNPC(
    NPCSettings("Виталик"),
    this.world.level, //измерение в котором запущен скрипт
    BlockPos(-88, 71, 154) //Случайное место рядом с игроком
)

team.sendMessage("[debug] NPC created")

//Новая задача, идти к ближайшему игроку в команде
npc.makeTask {
    movement.go(team).await() //await() значит что код дальше не пойдёт, пока npc не достигнет цели
}

npc say "Привет)"

npc.makeTask {
    movement.go(-71, 74, 154).await() //await() значит что код дальше не пойдёт, пока npc не достигнет цели
}
npc.makeTask {
    look.at(-72, 74, 154).await() //await() значит что код дальше не пойдёт, пока npc не достигнет цели
}

npc say "Ха, я умею анимироваться"

npc.play("animation.npcsteve.happy", playType = PlayType.LOOPED)

wait(1.5f)

npc stop "animation.npcsteve.happy"

npc say "Ну всё, пока!"

//Новая задача, избегать всех игроков в команде
npc.makeTask {
    movement.avoid(team)
        .async() //async() значит что задача будет выполняться ассинхронно (код продолжит идти дальше, даже если цель не достигнута)
}
wait(10f)
```

```mdx-code-block
</TabItem>
<TabItem value="original" label="Original">
```

```jsx
import net.minecraft.core.BlockPos
import ru.hollowhorizon.hc.client.gltf.animations.PlayType

//Создаём нового NPC
val npc = NPCEntity.getOrCreate(
    NPCSettings("Виталик", "hollowengine:models/entity/player_model.gltf"),
    SpawnLocation(
        pos = BlockPos(2, -60, 1)
    )
)

//Новая задача, идти к ближайшему игроку в команде
npc.makeTask {
    movement.go(team).await() //await() значит что код дальше не пойдёт, пока npc не достигнет цели
}

npc say "Привет)"

npc.makeTask {
    movement.go(2, -60, 1).await() //await() значит что код дальше не пойдёт, пока npc не достигнет цели
}
npc.makeTask {
    look.at(2, -60, 1).await() //await() значит что код дальше не пойдёт, пока npc не достигнет цели
}

npc say "Ха, я умею анимироваться"

npc.play("animation.npcsteve.happy", playType = PlayType.LOOPED)

wait(1.5f)

npc stop "animation.npcsteve.happy"

npc say "Ну всё, пока!"

//Новая задача, избегать всех игроков в команде
npc.makeTask {
    movement.avoid(team)
        .async() //async() значит что задача будет выполняться ассинхронно (код продолжит идти дальше, даже если цель не достигнута)
}
wait(10f)
```
```mdx-code-block
</TabItem>
</Tabs>
```