---
sidebar_position: 2
---

# 1.0 | Скриптовый движок | Вступление

## Скриптовый [KotlinScript](https://github.com/Kotlin/KEEP/blob/master/proposals/scripting-support.md)

HollowCore (автор: HollowHorizon) использует продвинутый скриптовый движок KotlinScript, специально переписанный для использования в модах. 
KotlinScript - это язык программирования, который позволяет создавать скрипты на Kotlin с некоторыми упрощениями. 
Например, вам не нужно создавать классы или методы - все, что вы напишете в скрипте, будет запущено как отдельный метод. 
Однако вы по-прежнему можете придерживаться всех принципов ООП с некоторыми допущениями.

HollowEngine использует этот движок для создания различных скриптов, включая [Диалоги](./dialogues) и События. Если вы уже знакомы с программированием на Kotlin, то трудностей у вас не возникнет. 
Если же нет, то настоятельно рекомендуем ознакомиться хотя бы с основами этого языка!

## Как создать свой скрипт?
Прежде всего установите мод и зайдите в мир.
После чего в папке с игрой (по умолчанию: `.minecraft`) появится папка `hollowengine`.
В ней вы и можете создавать скрипты.
Рекомендую распределять файлы по разным папкам, например: `hollowengine/scripts/modpack/chapter_1/prologue/...`.

Названия файлов обязаны иметь вид `name.type.kts`,
где `name` - название скрипта, `type` - тип скрипта (подробнее о типах скрита [здесь](./scriptfiles))
(у каждого вида скриптов свой тип, их имена соответственно в других разделах), `kts` окончание скрипта, оно и должно так называться.

После запуска будет компиляция, она может занимать от 5 секунд, до 3-5 минут в зависимости от размера скрипта и производительности ПК. 
После первой компиляции скрипты кэшируются и запускаются моментально. 
При изменении скрипта и повторного запуска скрипт компилируется заново.

Для создания вашего первого скрипта необходимо установить мод и зайти в мир.
Названия файлов должны иметь вид `name.type.kts`, где name - название скрипта,
type - тип скрипта (у каждого вида скриптов свой тип), kts - окончание скрипта.
После запуска скрипта происходит компиляция, которая может занимать от 5 секунд до нескольких минут, в зависимости от размера скрипта и производительности ПК.
После первой компиляции скрипты кэшируются и запускаются моментально, а при изменении скрипта и повторном запуске он компилируется заново.

## Звуки и озвучка

Чтобы проиграть звук, напишите в скрипте: `play("sound")` - где "sound" путь к звуку (как в команде /playsound),
добавить новые звуки можно через ресурспаки или моды-загрузчики ресурсов 

Например:
```jsx
play("minecraft:ambient.basalt_deltas.additions")
```
или
```jsx
play("mymod:rickroll")
```

## Известные проблемы
- Скриптовой движок может работать не на всех лаунчерах.
  - На данный момент работоспособность гарантирована лишь:
    - Official Launcher
    - TLauncher
    - Legacy Launcher (later: TL Launcher)
  - Не работает с:
    - Modrinth Launcher
- ~~При использовании в коде классов из игры, все переменные и методы обфусцированны, т.е. вместо условного `Minecraft.getInstance().setScreen(...)`
придётся писать `Minecraft.func_71410_x().func_147108_a(...)`, исправить это в ближайшие недели не получится, 
ибо придётся серьёзно переписывать компилятор Kotlin.~~
  - Исправлено в последней версии.
- Пока мод не тестировался на сервере, так что это придётся учитывать при разработке, ибо никакую совместимость я пока не писал,
но теоретически всё должно работать. Только учитывайте, что диалоги - чисто клиентская часть, а события - серверная.